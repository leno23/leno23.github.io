---
title: è§£è¯»Integer.bitCountçš„æºç 
index_img: https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/edb6145b6d26478ba657a0c14991812b~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?
tags: [ä½è¿ç®—]
categories: [æºç ]
comment: 'valine'
---


### å¼•å­

#### ç›®æ ‡
*ä»Šå¤©çš„æ ‡é¢˜æ˜¯ "è§£è¯»Integer.bitCountçš„æºç "ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™ä¸€å¨ã€‚ä½†æ˜¯ï¼Œç›´æ¥é˜…è¯»å¯èƒ½ä¼šåŠé€€è‡ªå·±ï¼Œæ‰€ä»¥ï¼Œä»Šå¤©æˆ‘å¸¦ä½ ä»ä¸€é“ç®€å•çš„leetcode ç®—æ³•é¢˜å¼€å§‹çœ‹èµ·ï¼Œåªè¦ä½ æ˜ç™½ä½è¿ç®—çš„åŸºæœ¬å®šä¹‰ï¼Œè·Ÿç€ä¸‹é¢çš„æ­¥éª¤è¿›è¡Œä¸‹æ¥ï¼Œç›¸ä¿¡ä½ æœ€ç»ˆä¹Ÿå¯ä»¥è¯»æ‡‚ä¸‹é¢è¿™æ®µä»£ç ã€‚*

```java
public static int bitCount(int i) {
    // HD, Figure 5-2
    i = i - ((i >>> 1) & 0x55555555);
    i = (i & 0x33333333) + ((i >>> 2) & 0x33333333);
    i = (i + (i >>> 4)) & 0x0f0f0f0f;
    i = i + (i >>> 8);
    i = i + (i >>> 16);
    return i & 0x3f;
}
```

#### é¢˜ç›®
é¦–å…ˆï¼Œä»[å‰‘æŒ‡ Offer 15. äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°](https://leetcode.cn/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/)è¿™é“ç®—æ³•é¢˜è°ˆèµ·ï¼Œé¢˜ç›®å¤§æ„æ˜¯ç»™æˆ‘ä»¬ä¸€ä¸ª**æ— ç¬¦å·**çš„32ä½æ•´æ•°ï¼Œè®©æˆ‘ä»¬è¿”å›å…¶ä¸­äºŒè¿›åˆ¶å½¢å¼ä¸­1çš„ä¸ªæ•°ã€‚

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a582529b46aa4f57a62d6c9ac19ca14a~tplv-k3u1fbpfcp-watermark.image?)

ä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™é“é¢˜ç›®å¤§å®¶éƒ½ä¼šæœ‰å“ªäº›è§£æ³•ï¼Ÿ

### æ€è·¯

å½“ç„¶ï¼Œè¿™ä¸ªé—®é¢˜çš„è§£å†³åŠæ³•å¾ˆå¤šï¼Œè¿™é‡Œåªä»‹ç»ä¸ªäººè§‰å¾—æœ‰ä»£è¡¨æ€§çš„ä¸‰ç§æ–¹æ³•ï¼Œæ–¹ä¾¿å¼•å‡º æœ€ç»ˆæºç çº§åˆ«çš„æ“ä½œã€‚

æ—¶é—´å¤æ‚åº¦ï¼Œä¹Ÿæ˜¯ä»O(n)åˆ°O(1)é€æ­¥ä¼˜åŒ–
#### 1ã€ç›´æ¥éå†O(n)
å¯¹äºå¤§éƒ¨åˆ†ç®—æ³•è€å¸æœºæ¥è¯´ï¼Œæ˜ç™½è¿™é¢˜çš„æ„æ€ä¹‹åï¼Œç›¸ä¿¡ä»–ä»¬å¯ä»¥é©¬ä¸Šå†™å‡ºå¦‚ä¸‹ä»£ç 
```js
var hammingWeight = function (n) {
    let res = 0
    while (n) {
        res += (n & 1)
        n >>>= 1
    }
    return res
};
```
> ä¸Šè¿°ä»£ç çš„å«ä¹‰ä¸éœ€è¦èµ˜è¿°ï¼Œè¿™é‡Œä½œè€…æš‚æ—¶å·ä¸ªæ‡’ğŸ¤—ï¼Œæ¬è¿æœ€è¿‘å¾ˆç«çš„charGPTçš„å›ç­”**ä»¥é£¨è¯»è€…**  ğŸ¤£

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0b96531ce8c4f449aa3c933caefd0dd~tplv-k3u1fbpfcp-watermark.image?)

> ç”±äºè¿™ä¸ªæ–¹æ³•éœ€è¦éå†32ä¸ªäºŒè¿›åˆ¶ä½ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä½O(k) k=32
#### 2ã€æ¯æ¬¡æ¸…é™¤æœ€ä½ä½1O(log n)
ç¬¬äºŒç§æ–¹æ³•ç›¸å¯¹äºç¬¬ä¸€ç§æ–¹æ³•ä¼šå·§å¦™ä¸€äº›ï¼Œå®ƒåˆ©ç”¨n&n-1æ¯æ¬¡å°†näºŒè¿›åˆ¶ä¸­çš„æœ€åä¸€ä¸ª1æ”¹æˆ0ï¼Œä¿®æ”¹çš„æ¬¡æ•°å³nä¸­1çš„ä¸ªæ•°ã€‚

```
ä¾‹å¦‚  7 
      7 --> 111  7-1 --> 110  n&n-1  110=6 ç¬¬ä¸€æ¬¡å°†æœ€åä¸€ä½1ç½®ä¸º0
      6 --> 110  6-1 --> 101  n&n-1  100=4 ç¬¬äºŒæ¬¡å°†ç¬¬äºŒä½1ç½®ä¸º0
      4 --> 100  4-1 --> 011  n&n-1  000=0 ç¬¬ä¸‰æ¬¡å°†ç¬¬ä¸€ä½1ç½®ä¸º0   
æœ€ç»ˆç»“æœä¸º3
```     
```js
var hammingWeight = function (n) {
    let res = 0
    while (n) {
        n &= n - 1
        res++
    }
    return res
};
```
æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ–¹æ³•å·§å¦™ä¹‹å¤„åœ¨äºè¿ç”¨åˆ° n&n-1è¿™ä¸ªæ“ä½œæ¯æ¬¡å¯ä»¥æŠŠnçš„æœ€åä¸€ä½1ç½®ä¸º0ï¼Œä»è€Œç»Ÿè®¡å‡º1çš„ä¸ªæ•°

> ç”±äºè¿™ä¸ªæ–¹æ³•çš„éå†æ¬¡æ•°å–å†³äº nä¸­çš„1çš„ä¸ªæ•°ï¼Œæ‰€ä»¥å‡æ‘Šå¤æ‚åº¦ä½log n
#### 2ã€åˆ†æ²» O(1)

æœ€åï¼Œå°±æ˜¯å¤§åé¼é¼çš„bitCountæ–¹æ³•çš„ä»‹ç»äº†ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“32ä½æ— ç¬¦å·æ•´æ•°å 4ä¸ªå­—èŠ‚ ä¸€ä¸ªå­—èŠ‚æœ‰8ä¸ªäºŒè¿›åˆ¶ä½,1æœ€å¤šçš„æ•°æ˜¯0xffffffffï¼Œå…¶ä¸­çš„ä¸€ä¸ªfä»£è¡¨ä¸€æ®µ4ä¸ªä¸º1çš„äºŒè¿›åˆ¶ä½ å†™æˆäºŒè¿›åˆ¶çš„è¯ä¹Ÿå°±æ˜¯ *11111111 11111111 11111111 11111111*ã€‚

ç„¶åï¼Œå¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œæˆ‘ä»¬å¦‚æœæƒ³æ¯ä¸¤ä½çš„éå†ï¼Œå¯ä»¥å¦‚ä½•åšå‘¢ï¼Ÿå½“ç„¶ï¼Œè¿™é‡Œçš„éå†æ˜¯æŒ‡æˆ‘ä»¬æƒ³å°†äºŒè¿›åˆ¶ä½ä¸¤ä¸¤çœ‹æˆä¸€ç»„ï¼Œç„¶åå–å‡ºå…¶ä¸­çš„é«˜ä½å’Œä½ä½ã€‚è¿™è¯æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ
```
ä¾‹å¦‚ 

3çš„äºŒè¿›åˆ¶æ˜¯ 11  æˆ‘ä»¬æƒ³è¦åšçš„å°±æ˜¯å°†11çœ‹æˆä¸€ç»„ï¼Œå–å‡ºå·¦è¾¹çš„1(é«˜ä½) å’Œ å³è¾¹çš„1(ä½ä½)ï¼Œä¹Ÿå°±æ˜¯ 1 1
7çš„äºŒè¿›åˆ¶æ˜¯ 111  æˆ‘ä»¬æƒ³è¦åšçš„å°±æ˜¯å°†11çœ‹æˆä¸€ç»„ï¼Œè¿™é‡Œå¯èƒ½ä½ è¦é—®ï¼Œç°åœ¨åªæœ‰3ä¸ª1ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆåˆ†ç»„å‘¢ï¼Ÿ

ä¸æ˜ç™½çš„å°ä¼™ä¼´å¯ä»¥çœ‹ä¸‹é¢çš„è§£é‡Šï¼Œæ¸…æ¥šçš„å¤§ä½¬å¯ä»¥ç›´æ¥è·³è¿‡ã€‚
/*
å½“æˆ‘ä»¬åœ¨å†™å‡ºä¸€ä¸ªæ•°å­—çš„äºŒè¿›åˆ¶å½¢å¼æ—¶ï¼Œå…¶å®æ˜¯çœç•¥äº†ä»–å‰é¢çš„0çš„ï¼Œå› ä¸ºè¿™æ ·ä½¿å¾—ä¹¦å†™æ¯”è¾ƒç®€ä¾¿ã€‚
æ¯”å¦‚å¯¹äºä¸€ä¸ª32ä½æ•´æ•°ï¼Œå®ƒä»¬çš„äºŒè¿›åˆ¶å½¢å¼æ˜¯æœ‰32ä½çš„ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥åªå†™äº†åé¢çš„éƒ¨åˆ†ï¼Œæ˜¯å› ä¸ºå‰é¢éƒ½æ˜¯0
æ¯”å¦‚ 
7 -- 111 å…¶å®å®Œæ•´çš„äºŒè¿›åˆ¶æ˜¯ 00000000 00000000 00000000 00000111  
10 -- 1010  å®Œæ•´çš„äºŒè¿›åˆ¶æ˜¯ 00000000 00000000 00000000 00001010
çœ‹å§ï¼Œæ˜¯ä¸æ˜¯å†™å®Œæ•´äº†ä¹‹åï¼Œçœ‹èµ·æ¥ä¹Ÿæ˜¯å¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å¤§å®¶æ™®ééƒ½æ˜¯åªçœ‹åé¢æœ‰1çš„éƒ¨åˆ†ã€‚
è¿™æ ·ä¸€æ¥ï¼Œä¹Ÿå°±ä¸å½±å“åˆ†ç»„äº†ã€‚
*/
```
##### å¼€å§‹åˆ†ç»„
```
ä¹¦æ¥ä¸Šæ–‡ï¼Œå¯¹äº7=111 å–å‡ºå·¦è¾¹çš„1(é«˜ä½) å’Œ å³è¾¹çš„1(ä½ä½)ï¼Œå› ä¸ºæœ‰ä¸¤ç»„ 01ã€11ï¼Œå–å‡ºçš„é«˜ä½å’Œä½ä½åˆ†åˆ«æ˜¯0 1ã€1 1

çŸ¥é“äº†ä¸Šé¢çš„ä¹‹åï¼Œå¯¹äºæœ‰æ•ˆäºŒè¿›åˆ¶ä½çŸ­çš„æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€çœ¼çœ‹å‡ºæ¥ï¼Œ
ä½†æ˜¯å¯¹äºæ¯”è¾ƒé•¿çš„äºŒè¿›åˆ¶ä¸²ï¼Œæˆ‘ä»¬æ˜¯ä¸æ–¹ä¾¿ç›´æ¥è·å–çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦ç”¨ä¸€ç§æ–¹æ³•å¯ä»¥ä¸€ä¸ªæ•°äºŒè¿›åˆ¶ä¸­ä¸¤ä¸¤ä¸€ç»„çš„ é«˜ä½å’Œä½ä½ã€‚
```
##### ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸ºä¸€ç»„è¿›è¡Œè®¡æ•°
```
å¯¹äº2ä½çš„äºŒè¿›åˆ¶ä¸²ã€‚æ¯”å¦‚ 11ï¼Œ
æˆ‘ä»¬å¯ä»¥å°† 11 & 10 å°±è·å–åˆ°äº†é«˜ä½1ï¼Œ
ç”¨11 & 01  å°±è·å–åˆ°äº†ä½ä½çš„1ã€‚

ä¸ºäº†è®©ä»–ä»¬ & ç›¸åŒçš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥å°†è·å–é«˜ä½çš„æ–¹æ³•æ”¹ä½ â€œå…ˆå°†11å³ç§»ä¸€ä½å˜æˆ01ï¼Œè¿™æ ·å¤„åœ¨é«˜ä½çš„1å°±åˆ°äº†ä½ä½ã€‚

ç„¶åå°±å¯ä»¥ & 01è·å–åˆ°æ­¤æ—¶ä½ä½çš„1â€ã€‚
æ‰€ä»¥ï¼Œè·å–é«˜ä½çš„æ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨ 11 >>> 1 & 01ã€‚

è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å°†äºŒä½çš„äºŒè¿›åˆ¶ä¸²ä¸­é«˜ä½1çš„ä¸ªæ•° ç®—å‡ºæ¥*é‡æ–°*æ”¾åˆ°è¿™ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸Šï¼Œ
å°†ä½ä½1çš„ä¸ªæ•°ä¹Ÿç®—å‡ºæ¥å¹¶æ”¾åˆ°è¿™ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸Šäº†ã€‚

åˆå› ä¸º2ä¸ªäºŒè¿›åˆ¶å¯ä»¥å­˜çš„æœ€å¤§æ•°ä½11=3ï¼Œè¿™ä¸ªæ•°æ˜¯å¤§äº äºŒä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°çš„ã€‚è¿™å¥è¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ
ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆšåˆšæˆ‘ä»¬ä½¿ç”¨11 >> 1&01 å¾—åˆ°01=1ï¼Œè¡¨ç¤º11è¿™ä¸ªäºŒè¿›åˆ¶ä½ä¸­é«˜ä½çš„1çš„ä¸ªæ•°æ˜¯1ä¸ªï¼›
ä½¿ç”¨11 & 01å¾—åˆ°01=1ï¼Œè¡¨ç¤º11å…¶ä¸­ä½ä½1çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆï¼Œä»–ä»¬ç›¸åŠ å°±å¾—åˆ°äº†ï¼Œè¿™ä¸ª2ä½çš„äºŒè¿›åˆ¶ä¸²ä¸­1çš„ä¸ªæ•°ã€‚

åˆå› ä¸ºä¸¤ä¸ªæ•°å­—éƒ½æ˜¯å­˜æ”¾åˆ°2ä¸ªäºŒè¿›åˆ¶ä½ä¸Šçš„ï¼Œ2ä¸ªäºŒè¿›åˆ¶ä½ä¸Šçš„æœ€å¤§èƒ½è¡¨ç¤º3,è€Œä¸”3>2ï¼Œ
è¿™æ ·ç”¨èƒ½æœ€å¤§è¡¨ç¤º3çš„ä¸€ä¸ªæ•°å­—æ¥è¡¨ç¤º2ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ï¼Œå°±ä¸ä¼šå‡ºç°æº¢å‡ºçš„é—®é¢˜ã€‚

æœ€åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ—å‡º2ä½äºŒè¿›åˆ¶ä¸²ä¸­1çš„ä¸ªæ•°çš„æ±‚è§£æ–¹æ³•  
(æ³¨æ„ï¼šjsä¸­ä½¿ç”¨0bä½œä¸ºå‰ç¼€è¡¨ç¤ºäºŒè¿›åˆ¶æ•°å­—)

let t = 0b01,num = 0b11
let cnt = (num >>> 1 & t) + (num & t)
ç¬¬äºŒæ­¥ å¯ä»¥ç®€å†™æˆ let cnt = num - ((num >>> 1) & t)ï¼Œå°‘ä¸€æ¬¡&è¿ç®—ï¼Œæå‡æ•ˆç‡
è¡¨ç¤º 2ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•° = äºŒè¿›åˆ¶è¡¨ç¤ºçš„æ•°å­— - é«˜ä½çš„1çš„ä¸ªæ•°ï¼Œä¾‹å¦‚ï¼š
11 = 3 - 1 = 2    
10 = 2 - 1 = 1
01 = 1 - 0 = 1
ä¹Ÿå°±æ˜¯ï¼Œä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸Š1çš„ä¸ªæ•°,å¯ä»¥é€šè¿‡è¿™ä¸ªäºŒè¿›åˆ¶æ•°å‡å»é«˜ä½1çš„ä¸ªæ•°å¾—åˆ°
ä¾‹å¦‚ 
11 - 1 = 2
01 - 0 = 1
```
##### å››ä¸ªäºŒè¿›åˆ¶ä½ä¸ºä¸€ç»„è¿›è¡Œè®¡æ•°
```

å½“ä½ æ˜ç™½ä¸Šé¢2ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„æ±‚è§£æ–¹æ³•ä¹‹åï¼ŒåŒæ ·çš„æ–¹æ³•å¯ä»¥å¾—åˆ°4ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯

let t1 = 0b0101, t2 = 0b0011, num = 0b1101
num = num - (num >>> 1 & t)
let cnt = (num >>> 2 & t2) + (num & t2)

ä¸Šé¢çš„æ“ä½œå«ä¹‰æ˜¯ï¼Œå¯¹äºæ•°å­—1101ï¼Œå…ˆå°†2ä¸ªäºŒè¿›åˆ¶çœ‹æˆä¸€ç»„ï¼Œè®¡ç®—å‡ºæ¯ç»„ä¸­çš„1çš„ä¸ªæ•°ï¼Œç„¶åå°†å®ƒå­˜å‚¨åœ¨å½“å‰çš„2ä¸ªäºŒè¿›åˆ¶ä½ä¸Šã€‚

å³1001ï¼Œ10=2è¡¨ç¤º11è¿™ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸­1æœ‰2ä¸ªï¼Œ01=1è¡¨ç¤º01è¿™ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸­1æœ‰1ä¸ªã€‚

ç„¶åï¼Œåœ¨è¿™ä¸ªç»“æœçš„åŸºç¡€ä¸Šï¼Œå°†4ä¸ªäºŒè¿›åˆ¶ä½çœ‹æˆä¸€ç»„ï¼Œè®¡ç®—æ¯ç»„ä¸­1çš„ä¸ªæ•°ï¼Œç„¶åå°†ä»–ä»¬å­˜å‚¨åœ¨å½“å‰çš„4ä¸ªäºŒè¿›åˆ¶ä½ä¸Š

å› ä¸ºä¸Šé¢ä¸€æ­¥å·²ç»è®¡ç®—å¾—åˆ°äº†æ¯ä¸¤ä½äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°ï¼Œæ‰€ä»¥æ­¤å¤„å°†é«˜ä¸¤ä½1çš„ä¸ªæ•° ä¸ ä½ä¸¤ä½1çš„ä¸ªæ•°ç›¸åŠ ï¼Œå°±å¯ä»¥å¾—åˆ°ç»“æœã€‚

å³0011, 0011=3,è¡¨ç¤º1101è¿™å››ä¸ªäºŒè¿›åˆ¶ä½ä¸­1æœ‰3ä¸ªã€‚


```


##### å…«ä¸ªäºŒè¿›åˆ¶ä½ä¸ºä¸€ç»„è¿›è¡Œè®¡æ•°
```
å’Œä¸Šé¢çš„æ€è·¯ä¸€æ ·ï¼Œå¾—åˆ°8ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯
01010101 å¯ä»¥ä½¿ç”¨0x55555555ä»£æ›¿
00110011 å¯ä»¥ä½¿ç”¨0x33333333ä»£æ›¿
00001111 å¯ä»¥ä½¿ç”¨0x0f0f0f0fä»£æ›¿

num = 0b1011111111(åè¿›åˆ¶çš„767)
num = num - ((num >>> 1) & 0x55555555)
num = (num >>> 2 & 0x33333333) + (num & 0x33333333)
let cnt = (num >>> 4 & 0x0f0f0f0f) + (num & 0x0f0f0f0f)
å…¶ä¸­æœ€åä¸€ä½ å¯ä»¥ç®€å†™æˆ (num + (num >>> 4)) & 0x0f0f0f0fï¼Œå°‘ä¸€æ¬¡&è¿ç®—ï¼Œæå‡æ•ˆç‡
ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·ç®€å†™å‘¢ï¼Ÿ

å› ä¸ºnum >>> 4 è¡¨ç¤ºnumä¸­é«˜å››ä½ä¸­1çš„ä¸ªæ•°ï¼Œ
è€Œnumå¯ä»¥çœ‹åšæ˜¯ä½å››ä½ä¸­1çš„ä¸ªæ•°ï¼ˆå› ä¸ºåé¢ & 0x0f0f0f0fä¼šå°†é«˜å››ä½éƒ½å˜ä¸º0ï¼‰ã€‚

é‚£ä¹ˆï¼Œ num + (num >>> 4)å°±è¡¨ç¤ºè¿™8ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ï¼Œ
åˆå› ä¸º4ä¸ªäºŒè¿›åˆ¶ä½èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°ä¸º0b1111=15 >8ï¼Œæ‰€ä»¥ç”¨æœ€å¤§å¯ä»¥è¡¨ç¤º 15çš„æ•°è¡¨ç¤º8ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ä¸ä¼šæœ‰ä¸å¤Ÿç”¨çš„æƒ…å†µã€‚

```

##### 16ä¸ªäºŒè¿›åˆ¶ä½ä¸ºä¸€ç»„è¿›è¡Œè®¡æ•°
```
æ€è·¯å’Œ8ä¸ªäºŒè¿›åˆ¶ä½å®Œå…¨ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯

num = 0b1011111111(åè¿›åˆ¶çš„767)
num = num - ((num >>> 1) & 0x55555555)
num = (num >>> 2 & 0x33333333) + (num & 0x33333333)
num = (num + (num >>> 4) & 0x0f0f0f0f)
let cnt = num + (num >>> 8)

å› ä¸ºä½¿ç”¨8ä¸ªäºŒè¿›åˆ¶ä½è¶³ä»¥è¡¨ç¤º32ä½æ•´æ•°ä¸­1çš„ä¸ªæ•°ï¼Œæ‰€ä»¥åé¢å°±å¯ä»¥ä¸ç”¨åˆ‡å‰²ï¼Œå»æ‰å‰å…«ä½çš„å€¼äº†

```
##### 32ä¸ªäºŒè¿›åˆ¶ä½ä¸ºä¸€ç»„è¿›è¡Œè®¡æ•°
```
num = 0b1011111111(åè¿›åˆ¶çš„767)
num = num - ((num >>> 1) & 0x55555555)
num = (num >>> 2 & 0x33333333) + (num & 0x33333333)
num = (num + (num >>> 4) & 0x0f0f0f0f)
num = num + (num >>>> 8)
let cnt = num + (num >>> 16)
```
##### å¾—åˆ°ç»“æœ

```
num = 0b1011111111(åè¿›åˆ¶çš„767)
num = num - ((num >>> 1) & 0x55555555)
num = (num >>> 2 & 0x33333333) + (num & 0x33333333)
num = (num + (num >>> 4) & 0x0f0f0f0f)
num = num + (num >>> 8)
num = num + (num >>> 16)
let cnt = num & 0xff
ç”±äºä½¿ç”¨0x3fä¹Ÿå°±æ˜¯6ä¸ªäºŒè¿›åˆ¶ä½è¶³ä»¥è¡¨ç¤º32ä½æ•´æ•°ä¸­1çš„ä¸ªæ•°ï¼Œå› ä¸º111111=63 > 32
æ‰€ä»¥ï¼Œæœ€åä¸€è¡Œä¹Ÿå¯ä»¥å†™æˆ let cnt = num & 0x3f
```
##### æ€è·¯æˆå›¾
å°†æ•´ä¸ªè¿‡ç¨‹æŒ‰ç…§åˆ†æ²»æ€æƒ³ï¼Œå¯ä»¥ç”»å‡ºå¦‚ä¸‹çš„å›¾

ä½“ç°çš„æ€æƒ³æ˜¯ï¼š**å½“æˆ‘ä»¬ç›´æ¥è®¡ç®—32ä½äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°å¾ˆå›°éš¾æ—¶ï¼Œå¯ä»¥å…ˆè®¡ç®—æ¯ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ï¼Œç„¶åæ ¹æ®è¿™ä¸ªç»“æœï¼Œå†è®¡ç®—æ¯å››ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ï¼Œè¿›è€Œå¾—åˆ°8ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ã€16ä¸ªäºŒè¿›åˆ¶ä½ä¸­1çš„ä¸ªæ•°ï¼Œæœ€ç»ˆå¾—åˆ°æ•´ä¸ªäºŒè¿›åˆ¶ä¸²ä¸­1çš„ä¸ªæ•°**

```css
767çš„äºŒè¿›åˆ¶å½¢å¼ä¸º00000000 00000000  00000010 11111111

             äºŒè¿›åˆ¶                       åè¿›åˆ¶
 1  0   1  1   1  1   1  1   1  1     10 11 11 11 11
  01     10     10     10     10       1 2  2  2  2
          \     /       \     /           /    /
  01       0100           0100         1   4    4
                \       /                   \  /
  01               1000                1      8
      \          /                       \   /
          1001                             9
          
              767çš„äºŒè¿›åˆ¶ä¸­çš„1çš„ä½æ•°è®¡ç®—è¿‡ç¨‹
```

### ä»£ç 
#### æ–¹æ³•1
```js
var hammingWeight = function (n) {
    let res = 0
    while (n) {
        res += (n & 1)
        n >>>= 1
    }
    return res
};
```

#### æ–¹æ³•2
```js
var hammingWeight = function (n) {
    let res = 0
    while (n) {
        n &= n - 1
        res++
    }
    return res
};
```

#### æ–¹æ³•3
```js
var hammingWeight = function (i) {
    i = i - ((i >>> 1) & 0x55555555);
    i = (i & 0x33333333) + ((i >>> 2) & 0x33333333);
    i = (i + (i >>> 4)) & 0x0f0f0f0f;
    i = i + (i >>> 8);
    i = i + (i >>> 16);
    return i & 0x3f;
};

```